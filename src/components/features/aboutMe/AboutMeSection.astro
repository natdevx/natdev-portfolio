---
import AboutMe from "./AboutMe.astro";
import Education from "./Education.astro";
import Experience from "./Experience.astro";
import Skills from "./Skills.astro";

// Íconos
import UserIcon from "../../icons/User.astro";
import SchoolIcon from "../../icons/School.astro";
import BriefcaseIcon from "../../icons/Briefcase.astro";
import ToolsIcon from "../../icons/Tools.astro";

// Lista de secciones con íconos
const sections = [
  { id: "about", label: "Acerca de mí", icon: UserIcon },
  { id: "education", label: "Educación", icon: SchoolIcon },
  { id: "experience", label: "Experiencia", icon: BriefcaseIcon },
  { id: "skills", label: "Habilidades", icon: ToolsIcon },
];
---

<section class="w-full flex flex-col items-center gap-10 mt-20">
  <!-- Navbar interna -->
  <nav id="section-nav" class="flex flex-wrap justify-center gap-5">
    {sections.map((section, index) => {
      const Icon = section.icon;
      return (
        <button
          type="button"
          class={`flex items-center gap-2 px-6 py-3 text-lg font-semibold border-2 rounded-xl transition-all duration-300 
          ${
            index === 0
              ? "bg-[var(--color-primary)] text-white border-[var(--color-primary)]"
              : "border-[var(--color-primary)] text-[var(--color-primary)] hover:bg-[var(--color-primary)] hover:text-white"
          }`}
          data-section={section.id}
          onClick={`showSection('${section.id}', this)`}
        >
          <Icon class="w-6 h-6" />
          {section.label}
        </button>
      );
    })}
  </nav>

  <!-- Contenido de las secciones -->
  <div id="content" class="w-full mt-6">
    <div id="about" class="section visible">
      <AboutMe />
    </div>
    <div id="education" class="section hidden">
      <Education />
    </div>
    <div id="experience" class="section hidden">
      <Experience />
    </div>
    <div id="skills" class="section hidden">
      <Skills />
    </div>
  </div>
</section>

<script>
  function showSection(id, button) {
    // Ocultar todas las secciones
    document.querySelectorAll(".section").forEach((sec) => {
      sec.classList.add("hidden");
      sec.classList.remove("visible");
    });

    // Mostrar la seleccionada
    document.getElementById(id).classList.remove("hidden");

    // Cambiar estado de botones
    document.querySelectorAll("#section-nav button").forEach((btn) => {
      btn.classList.remove("bg-[var(--color-primary)]", "text-white");
      btn.classList.add("text-[var(--color-primary)]", "border-[var(--color-primary)]");
    });

    // Activar el botón actual
    button.classList.add("bg-[var(--color-primary)]", "text-white");
    button.classList.remove("text-[var(--color-primary)]");
  }
</script>

<style>
  .hidden {
    display: none;
  }
  .visible {
    display: block;
  }
</style>
